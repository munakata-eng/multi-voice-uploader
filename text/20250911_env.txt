はい どうも こんにちは 室畑です このチャンネルでは 今 流行りの AIを使って 開発未経験からでも プログラミングを学ぼうという コンセプトで 開発の基礎知識や 最新のAIツールについてお話し していきます 今回は ちょっと開発 をバリバリやっている方向けには なるんですけれども 環境変数という ものについて紹介してみようかな と思います 簡単なウェブサイト を作るときとか 手元でしか動かない ツールを作るときには あまり出て こないんですけれども セキュリティ 的に非常に重要な考え方になって くるので 紹介をさせてください まず 環境変数というのは何かという と 環境と変数という どっちも なかなか難しいんですけれども まず 環境というのは何を表すか というと どこでそのシステムとか アプリとかページが動くかという 場所になります 一番身近なところ でいうと 手元のパソコンの環境 ですね 自分のパソコン上でしか 動いていない状態 これも一つの 環境で これはローカル環境とか 言ったりするんですけれども そういう 手元のパソコンでしか動かない ローカル環境もあれば 誰でもURL にアクセスすれば URLをたたいて アクセスすると 誰でも見れる環境 これ本番環境とか言ったりします けれども そういう環境があった りとかですね 製品を開発するとき でいうと その手元のテストと本番 の間に位置するですね 開発環境 とかステージング環境とか そういう のがあったりするんですけれども そういう形で いろんな同じプログラム でも複数の場所で動くっていうこと が必ずありますね 少なくとも 手元で動かすときと みんなが見れる 場所で動かすっていう二か所があります し その間で本格的な開発であれば チェック用の場所もあったりという ところで いくつもの環境でプログラム が動くんですけれども その中で 重要な情報をやり取りするための 仕組み 変数っていうのが そのプログラム の中で使う数字とか文字のこと なんですけれども それをそれぞれ の場所でどうやって管理するか っていうのの考え方になるんですけ れども プログラムを実際に公開 するときには だいたいGitっていう セーブデータを保存できる仕組み で プログラムのここが変わりました よっていうのをどんどん保存して いって そのセーブデータをもと に本番環境とかでプログラムを 展開して動かすっていうのが 今 は主流なんですけど そのセーブ データの中に他の人に見せちゃ いけない情報は入れちゃいけません よっていう 別に完全に禁止されてる わけではないので 操作を失敗 すると入れられちゃうんですけれども そのセキュリティーの観点から 秘密鍵みたいな情報とか 他の人 に権限を付与するようなアクセス トークンとか APIキーとか そういう ものに関しては セーブデータとは 別のところで扱わなきゃいけない というような仕組みになっております そのときに 手元の環境では これ またおさほなんですけれども .env というエンブです エンブはエンバイロメント の略で環境という意味なんですけ れども .envというテキストファイル を作って その中に見せちゃいけない 情報を羅列するという そういう 使い方になります これが環境変数 ですね なので もう一回 ちょっと いろいろと難しい概念なので もう一度 おさらいなんですけれども 環境っていうのがどの場所で動く か 手元のパソコンなのか インターネット 上なのかというところになって いて その上で 今言った秘密情報 ですね 主にとか あとは環境によって データベースの場所が違うとか そういうこともあったりするので その環境 環境によって違う情報 を切り替えるっていうこともできるん ですけど 今のAIプログラミング でいうと そういう見せちゃいけない 情報を一旦隠しつつ 必要なところ から取ってくるみたいな仕組み が環境変数というふうになって いて .env .envファイルとか言った りしますけれども その中に鍵の 情報とかを書いておくというような 流れになります 鍵のファイルを 作るんですけど 何も考えないと セーブデータに勝手に含まれて しまうので この.envっていうファイル はセーブデータには入れないでください っていう設定がまた別でできて ちょっと専門用語どんどん増えて いくと難しいので そういうもの があると一旦覚えておいてもらえれば 大丈夫です これも.getignoreという ファイルに定義するんですけど この辺はまた別でご紹介します が そういう形でセーブデータに 載せないようにしつつ .envっていう ところに秘密の情報を書き書き しておいて プログラムの本体として は書き書きされた情報から取って くるっていう仕組みだけ作って おくという形になります 手元には 作られていて セーブデータにも 保存されない場合 どうやって公開 したときに情報を登録するんですか っていう話になるんですけれども これは大体のサービスで環境変数 の設定場所みたいなのが絶対あるん ですね この辺の環境変数っていう 考え方自体は共通なのでバーセル っていう仕組み プロサイトを公開 する仕組みを使ったときには 中身 を貼り付けてあげると 誰にも 公開されない形でちゃんとサーバー 公開する場所で設定がされて 裏側 でそのデータが読み込まれて動作 するというようなことにもなった りしますし 手元はこっちの鍵を 使うけど 本番に公開するときには こっちの鍵を使いますみたいな 感じで 切り替えることもできたり するという仕組みになっております そんな感じでちょっと概念として 非常に難しいんですけれども 知って おいてほしいこととしては まずは 機密情報 特にAPIキーとか 秘密 鍵とか アクセストークンみたいな ものが難易度の高い開発には絶対 出てくるんですね そういうのが 出たときに 絶対に実際のプログラム の中に直接書くんじゃなくて この 環境変数っていうところに別の ファイルとして分離しましょう っていうところが一つですね これ 覚えておいてほしいのと 困ったら 環境変数に分離してくださいとか いうことをAIに言ったりとか 一旦 調べてみるっていうのも一つ ありかもしれないですね っていう 形で まず別のファイル .envに分離 するということが大事なのと その .envファイルっていうのをGit の保存セーブデータに含まない そこから例外的にそいつは含まない よっていう設定 この二つが必要 になるので そういう手順が必要 なんだなということをまずなん となく覚えておいてもらえれば いいかなと思います これ結構 実際にやるタイミングになる と これかみたいなことが 僕が 話してる内容だとかなり多かったり するので 概念だけそういう隠す 仕組みがあって 隠す仕組みと例外 的に保存セーブデータに入れない 仕組みがあって 公開するときに 手動で隠した情報を登録する場所 があるので そういう形で機密情報 を守るんだよということだけ覚 えておいてもらえればよいかな と思います ちょっと今回は難易度 高め 触ってない人には何のこっちゃ という話かもしれませんが セキュリティー を守るためにいろんな仕組みがあるんだ よという話でございました それでは 本日もお聞きくださいまして ありがとうございました
