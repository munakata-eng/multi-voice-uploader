はい どうも こんにちは 室畑です このチャンネルでは 今流行りのAI を使って 開発未経験からでもプログラミング を学ぼうというコンセプトで 開発 の基礎知識や最新のAIツールについて お話ししていきます 前回 AIプログラミング でウェブサイト ウェブサービス を作るときには 結構費用が圧縮 できますよみたいな話をしたんです けれども 逆に これをやると費用 がとんでもなく跳ね上がる可能性 があるので 気を付けましょうっていう 話がしきれなかったので 今日は その辺の話をしていきたいと思います 大きく分けると 不必要な繰り返し の処理と あと 大容量ファイルを 扱う この二つがかなり費用を上げる 特に初心者でミスして サーバ費用 が上がりがちなところなので 深 ぼって説明していきたいと思います まず一つ 前回紹介したようなやり方 で想定をしておりまして サイト を公開するときにはサイト公開 用のサービスを契約して それとは 別に もしファイルをアップロード して扱う必要があったらストレージ サービスと 画像置き場ですね サーバー 上の画像とかファイル置き場を借りる とか あとはデータベースを借りる っていうような形で それぞれ必要な パーツをサービスとして借りる みたいな作りでの想定で話して いくんですけれども 必要最小限 の仕組みでやれば 前回話したように 無料枠で全部できちゃう用とか かかっても数十円 数百円かな みたいなところなんですけれども まずそれらのサービスは呼び出し の回数と あとはそこでのデータ の通信料みたいなもので大体課金 がされるんですね っていうのが あるんですけど まず気をつけなきゃ いけないのが そのプログラミの ミスで何度も何度もサーバーに アクセスをし続けるみたいなもの が作れちゃうっていうのが一つ 問題になります 何でしょうね ずっと起動しっぱなしのプログラム を作るのも意外と難しいので なかなか 遭遇しない可能性はあるんですけ れども 一例として 僕は昔やって しまったのが サイトの自分が作った サービスのランキングを作るみたいな ところで リアルタイム性を重視 するために 1分おきでランキング を作ろうみたいなサービスをまだ まだ経験の浅いときに作っていたん ですけれども そのときにランキング を作るためにデータを全部持って きて集計して 最新なランキング を書き込むっていう処理なんですけど それを1分おきに しかもデータを いちいち取ってくる仕組みにし ちゃっていてっていうのをやって しまうと その頻度が非常に高くて あとは引っ張ってくるデータも どんどんどんどん増えていくような 作りにしている かつ いわゆる キャッシュっていう 過去に取った やつはそのまま使えるようにっていう 仕組みがちゃんとできてなくて その結果 何度も何度も大きいファイル をやり取りして 月数万円みたいな 請求が来たみたいなのはあった りするので まずはその繰り返し 処理で何度も何度もアクセスする ようなものですね 気をつけなきゃ いけないのは 今のはデータベース ってものを使った例ですけど 多分 よくやるのでいうと APIっていう ものですね 外部のサービスを曲がり させてもらって 使った分だけ使用 料を支払うっていう仕組みなんですけど それを使ったサービスを作ってる ときに間違って繰り返しで何度も 何度もアクセスしちゃうっていう ふうになると 一気に費用 サーバー費 じゃないや 使用料が跳ね上がる ので気をつけましょうというような ものになります まずこれが繰り返し のプログラムと 特に重量課金される ものかける繰り返し処理ですね ここを気をつけましょうという ところが一つ もう一つが ここが 目には見づらいんですけれども 画像 とか動画の読み書きのときにも お金がかかるんですけど 最近の 画像や動画って高画質になっている ので それを毎回 サイトを表示 するたびにサーバーから引っ張って きてみたいなことをやっている のを何度も繰り返すとバカにならない 費用になってしまうっていうの も気をつけましょう 特にユーザー さんに何か投稿してもらうシステム とかを作ろうと思った場合 ユーザー さんが投稿してもらったやつを 全部 元の 人によっては一つの画像 なのに数十目が あんまりないかもしれない ですけど 二桁目が メガバイトの画像をアップロード して それをそのままサイトにアクセス する人が訪れるたびに それをサーバー から持ってきてみたいなのが100件 とか増えてくると その画像とか 動画の読み取りだけで非常にお金 がかかってしまうので 回避手段 としては そもそもアップロード する前にこっち側で圧縮みたいな プログラムを書くことができる ので ある程度 例えば自分のアイコン とかだったら そんなにでっかく 表示する場面って少ないと思う ので プロフィール画像をアップロード してもらうみたいなときだったら 事前に適度なサイズ 512x512とか もっと小さくてもいいかもしれない ですけど そういうサイズとか あと 画質をちょっと劣化させてみたいな ふうにしてから保存するとか あと は1回読み込んだものはそのまま キャッシュという仕組みを使って 何度も何度も読みに行かないという ような仕組みも作ることができる ので ひとまずは読みに行く回数 と1回あたりの読むサイズ ファイル のサイズをなるべく圧縮しましょう っていうところがとっても重要 になってくるので こちらも気をつける ポイントかなと思います とはいえ そんなに何でしょうね 一番最初に 作るようなプログラムだと そんな データがユーザーにアップロード してもらうとか 毎分とか繰り返し 処理をするようなものとかはなかなか ないと思うので ちょっと上級編 にはなるんですけれども やっぱり お金がかかってくるところっていう のはかなりシビアなので こういう ことをするとお金が跳ね上がる んだなっていうのは知識としては 知っておくといいかなということで お話しさせていただきました 改めて 言うと繰り返しの処理と あとは データの転送量 大容量のファイル の読み書きですね この二つが特に 掛け合わさると一気に費用が跳ね 上がるので気をつけましょうという ところなんですけれども 使うサービス には大体予算のアラート機能みたいな のがありまして サーバーの費用 が一定額以上になったらメール を飛ばしてくれるよとか 物によって は一定額以上をAPIとかだと特定 の金額以上はもう使えませんよ みたいな設定もできるので 何か ちょっと心配だなっていう方は そういうアラート設定と上限の 設定をするのをお勧めしております ただ この辺はサービスによって 違ったりするので ぜひ調べてみて くださいというところですね なかなか最初いろいろ作れるよう になって これは便利だって言って 使い始めるんですけど やっぱり 僕も一回落としたように思って ますが そうやって知らないところ 一つの知識を知らないだけで結構 被害が出る セキュリティの問題 とかもそうですけれども 費用面 でも知らないがために痛い目を 見るということがよくあったり するのもプログラミングという ところなので ぜひまずは知識 だけでも一つ入れておいていただけ ればと思います ということで 今回は以上になります 本日もお聞きくださいましてありがとうございました
