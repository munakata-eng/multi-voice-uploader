# Webサービス公開時に知っておきたい高額請求のリスク
こんにちは、むなかたです。

今回は知らないとサーバ費用が跳ね上がる
危険性があるポイントについて紹介していきます。

同じ内容はVoicyで音声でも説明しているので
ぜひお好きな方法でインプットしてみてくださいね。
https://r.voicy.jp/YQm40Aa5m2W

## 費用が跳ね上がる2大要因

AIプログラミングで特に初心者がミスしやすく
サーバー費用が急激に上がる要因は
以下の2つが考えられます。

1. 不必要な「繰り返し処理」
2. 「大容量ファイル」の読み取り

それぞれ詳しく説明していきましょう。

## 1. 繰り返し処理

人によるアクセスにはある程度限りがありますが
プログラムの「繰り返し処理」を使うと
人間ではできないレベルの高頻度で
アクセス数を増やすことができてしまいます。

API呼び出しやデータベースの読み書きを行うとき
意図しない高頻度の呼び出しが行われていないか
気にするクセをつけておきましょう。

## 2. 大容量ファイルの読み取り

画像や動画などの大容量ファイルの
ダウンロードを行うときにも注意が必要です。

こちらも1ファイルあたりの読み取り金額は
大したことはないのですが、

一覧で表示するサイトを作る場合など
1つ1つのファイルサイズが大きいと
積み重なって膨大な費用になる危険性があります。

### 回避策1. 事前圧縮

例えばサイトTOP画面で
画像を一覧で表示するような場面だと
品質の高い画像を見せる必要はありません。

事前にある程度のサイズまで圧縮したものを
サーバーにアップロードしておくことで
読み取り時の費用を大幅に圧縮できます。

### 回避策2. キャッシュの活用

同じファイルをダウンロードしてくるときに
毎回サーバーから読み取る必要はありません。

キャッシュと呼ばれる一時保存の仕組みを活用し
データ転送量を節約することができます。

## 予算管理とアラート設定

課金が発生するようなサービスには
「アラート」と「上限」が設定できます。

・アラート ... 予め設定した金額になったら通知
・上限 ... 課金が一定額を超えると利用停止

高額請求を防ぐため、課金が発生するものには
忘れずに設定しておきましょうね。

## まとめ

プログラミングでは「知らない」ことが
痛い目を見る原因になりがちです。

注意点さえ知っておけば回避できることも多いので
すぐに使わなくてもぜひ覚えておいてくださいね！

今回は以上です。
また次回もよろしくお願いします。