# AIを使ったChatBotの仕組みと作り方

こんにちは、むなかたです。

今回は、最近企業サイトでも
よく見かけるようになった
**チャットボット**の作り方と
裏側の仕組みについて
お話ししていきます。

実は私も、自分のコミュニティ向けに
過去の質問履歴や教材から
質問できる仕組みを作ろうと思い、
改めて本格的に調べてみました。

その経験を踏まえて、
どんな仕組みになっているのか、
どこに気をつければいいのか、
どうやって作るのかを
解説していきますね!

同じ内容は音声でも配信しているので、
ぜひお好きな方法でインプットしてくださいね!

## チャットボットとは?

最近、いろんなウェブサイトで
導入されているのを見かけますが、
**チャットボット**というのは
こんな仕組みです。

### よくある使い方

- サイトにアクセスすると画面の右下に
  「質問はこちらから」というボタン
- クリックするとLINEのような
  会話画面が開く
- 商品やサービスについて質問すると
  自動で回答してくれる

こういった、**チャット形式で
質問に自動応答してくれるロボット**
のことをチャットボットと言います。

### AI活用で注目される理由

AIを活用しようというときに、
真っ先に思い浮かぶのが
このチャットボットです。

特に企業では「チャットボットを
導入したい」という声が
多いですよね。

私の場合、これまで個人用途では
あまり必要性を感じていなかったのですが、
コミュニティ内の情報が増えてきたので
「簡単に答えたり検索できる
仕組みがあるといいな」と思い、
ここ数日、調べたり作ったりしています。

## チャットボットの裏側:RAGという仕組み

チャットボットの裏側には、
**RAG(ラグ)**という
重要な仕組みがあります。

### RAGとは?

**RAG = Retrieval Augmented Generation**
(検索拡張生成)

英語の正式名称は覚えなくてOKですが、
「ラグ」という言葉は
AI周りでよく出てくるので
覚えておくと便利です!

## 通常のAIの特徴と弱点

まず、皆さんがよく使っている
ChatGPTやGeminiなどの生成系AIの
特徴を理解しておきましょう。

### 通常のAIの強み

- 過去の膨大な情報を学習済み
- どんな質問にも答えてくれる
- 一般的な知識に強い

質問する人の情報を与えれば
ある程度パーソナライズしてくれますが、
基本的には**一般論に近い回答**を
返してくれます。

### 通常のAIの弱点

1. **情報源が不確か**
   - いろんな情報を平均化・集約したもの
   - 具体的な出典が分からない

2. **情報が古い**
   - 学習データは1〜2年前まで
   - 最新情報に弱い

## RAGで解決できること

RAGという仕組みを使うと、
これらの弱点を克服できます!

### RAGの基本的な考え方

1. **事前準備**
   - データベースを用意しておく
   - 最新情報や特化した情報を格納

2. **質問時の処理**
   - そのデータベースと一緒に
     AIに質問する
   - 最新情報や社内・製品特化の情報を
     返答してもらえる

### なぜ全部渡さないの?

「全部の情報を一気にAIに
渡せばいいのでは?」と
思うかもしれませんが、
それだと問題があります。

**問題点:**
- AIに一度に与えられる情報量
  (コンテキスト)には上限がある
- 大量の情報を与えると
  返答にかかる時間とお金が増える

そこで、**効率的に必要な情報だけ
渡す**という工夫が必要になります。

## RAGの具体的な仕組み

図書館の例で考えると
分かりやすいです!

### 理想だけどコストが高い方法

**全部渡す方法:**
- 図書館の全ての本を持ってきて
  AIに渡す
- 確実に答えは見つかるけど
  コストが高すぎる

### RAGの賢い方法

**効率的な方法:**

1. **事前準備**
   - 図書館の本を本棚ごとに分類
   - それぞれの本にラベルを付ける
     (専門用語で「ベクトル化」)

2. **質問が来たら**
   - 必要そうな本棚を特定
   - その本棚から関連する本だけ取ってくる

3. **AIに質問**
   - 取ってきた数冊の本と一緒に質問
   - 必要な情報だけで返答できる

### メリット

- コストを大幅削減
- 返答速度が速い
- 精度は維持できる

## RAGの実装は意外と面倒?

エンジニア的に見ると、
RAGの実装には
いくつか面倒な点がありました。

### 従来の課題

1. **データの格納**
   - どこにデータを保存するか

2. **ベクトル化**
   - 本棚に分ける作業
   - 分類の仕方にも選択肢が多い

3. **検索の仕組み**
   - 必要な情報を取り出す仕組み

これらを一から作るのは
結構ハードルが高くて、
正直、「やりたくないな...」と
避けていた部分もあります。

## Gemini File Searchで簡単に実現!

ところが、ちょうど私が
チャットボットを作ろうとした
タイミングで、素晴らしい
ツールを見つけました!

### Gemini File Searchとは?

GoogleのGemini APIで提供されている
**File Search**という機能です。

これを使うと、さきほど説明した
RAGの仕組みを**かなり簡単に**
実現できます!

### 何が簡単になったの?

**従来のハードル:**
- データの保存場所を決める
- ベクトル化(インデックス化)の実装
- 検索システムの構築

**File Searchなら:**
- ファイルを登録するだけでOK
- 複雑な処理は全部自動
- すぐにチャットボットが作れる

## 実際に作ってみた感想

私もGoogleのAtlas(ドキュメントサイト)を
参考にしながら、
ChatGPTに聞きながら作ってみました。

### 作成に必要なもの

1. **API Key**
   - Google AI Studioで発行できる文字列

2. **File Search Name**
   - ファイルを登録すると発行される名前

この2つさえあれば、
特定の情報に対して回答してくれる
チャットボットが簡単に作れました!

### どれくらい簡単?

- Googleのドキュメントを見ながら
- ChatGPTに質問しながら作業
- 結構すぐに動くものができた

かなりおすすめです!

## File Searchの大きなメリット

### 1. データ登録が簡単

従来、一番面倒だった
「データの保存」「ベクトル化」
の部分が非常に簡単になりました。

### 2. 維持管理が楽

一度登録しておけば、
あとは名前とAPIキーだけで
すぐに使えます。

### 3. コストも手頃

- 与えるデータ次第ですが
  そこまで大きくはかからない
- もちろん完全無料ではないが
  手の届く範囲

## チャットボット作成の流れまとめ

改めて、チャットボット作成の
全体像をまとめます。

### 1. チャットボットとは

- Webサイト上で自動応答する仕組み
- LINE風の会話画面で質問できる
- 商品やサービスについて自動回答

### 2. RAG(ラグ)という仕組み

- 通常のAIの弱点を補う技術
- 事前に用意したデータベースから
  必要な情報だけ取り出す
- 図書館の例:全部ではなく
  必要な本だけ持ってくる

### 3. Gemini File Search

- RAGを簡単に実現できるツール
- データ登録が非常に簡単
- すぐにチャットボットが作れる

## 実際に動いています!

私のコミュニティでは、
今作ったチャットボットが
すでに動き始めています。

### メンバーの皆さんへ

メンバー限定のページに
設置してあるので、
分からないことがあったら
ぜひボットに質問してみてください!

### フィードバックをください

私も初めて作ったので:
- どんな質問が来るか予想できていない
- どんな挙動になるか検証中
- 「この質問に答えてくれなかった」
  などあれば教えてください

## チャットボット制作のご相談もどうぞ!

自分のチャットボットを
作りたい方がいらっしゃれば、
ぜひお気軽にご相談ください。

### おすすめポイント

1. **ハードルが低い**
   - File Searchのおかげで
     かなり簡単になりました

2. **コストも手頃**
   - データ量次第ですが
     そこまで高くない

3. **実用的**
   - サポート対応の効率化
   - よくある質問への自動回答
   - 社内ナレッジの活用

ビジネスでも個人でも、
いろんな活用方法がありますよ!

## まとめ

今回お話しした内容を
整理します。

### チャットボットの基礎

- Webサイトで自動応答する仕組み
- LINE風の会話画面
- 企業でも個人でも活用可能

### RAG(ラグ)の仕組み

- Retrieval Augmented Generation
- データベースから必要な情報だけ取得
- 図書館の本棚の例で理解
- コストと精度のバランスが良い

### Gemini File Searchの登場

- RAGを簡単に実現できる
- データ登録が非常に簡単
- APIキーとFile Search Nameだけで使える
- すぐにチャットボットが作れる

### 実践のポイント

1. まずは小さく始める
2. 実際に動かして検証
3. フィードバックを集めて改善

チャットボットは、
AI活用の代表的な例ですが、
File Searchのおかげで
グッとハードルが下がりました。

ぜひ、皆さんも
チャレンジしてみてくださいね!

今回は以上です。
また次回もよろしくお願いします。
