# 自作サービスに課金機能を組み込むときの注意点
こんにちは、むなかたです。

今回は、AIプログラミングで作ったサービスに
課金機能を組み込もうと思った時に、
注意すべき点についてお話しします。

同じ内容はVoicyでも説明しているので、
ぜひお好きな方法でインプットしてみてくださいね。
https://r.voicy.jp/5P9aR3nvVeQ

## NG例:「課金状況に合わせて使える機能を制御」
例えばこのようなつくりを考えてみましょう。

- サービス自体は誰でも使える
- トライアル期間や一部機能は無料
- 課金後に追加機能を解放

この方法は一見問題ないように見えるのですが、
「誰が課金しているか」を自分で管理する必要があり
実は難易度の高いつくりとなっています。

### 必要な仕組み
- アカウント登録・ログイン機能
- 使用回数をカウントするデータベース管理
- 課金状況をチェックする機能
- 決済システムとの連携機能

### 考えられるリスク
- 個人情報漏洩の危険性
- データベースへの不正アクセス
- 課金システムの連携エラー
- セキュリティホールの発生

## OK例:「課金の仕組みとサービスを分離」
おすすめの方法は、途中で機能開放するのではなく
「課金した人だけがサービスを使えるようにする」
というものですね。

購入前に無料で試してほしいという場合には
「無料版」と「有料版」の2つを作っておき、
課金者にだけ有料版を提供すればOKです。

### 具体的な実装方法
お金を支払っていただくのは既存の仕組みで行い、
購入者のメールアドレスに対して案内を送る
ようなやり方で十分実現可能です。

**1.ダウンロード方式**
・購入者にだけダウンロードURLを送付
・非常にシンプルに作れる
・URL流出によって不正される可能性はある

**2. アクティベーションコード方式**
・購入者には合言葉を伝える
・サブスク系のサービスに有効
・毎月コードを変更して月初に共有
・ある程度の不正を防げる

**3. スマホの有料アプリ**
・開発難易度が高い
・売上の一部は持っていかれてしまう
・確実に不正は防げる

## まとめ

自作サービスに課金機能を組み込む際には
個人情報の流出やお金を払ったのに使えない等
他者に迷惑がかかる問題を避けるべきです。

課金サービスを分離することで、
不正されるリスク自体は増えてしまうのですが、
不利益を被るのが自分だけになるので
責任問題には発展しにくいです。

AIに提案された方法をすべて鵜呑みにせず
柔軟に仕組みを組み合わせて
安全にサービスを提供していきましょうね。

今回は以上です。
また次回もよろしくお願いします。